---
title: "Go Test에 대해 알아보자"
date: 2023-10-30T22:55:12+09:00
tags:
  - golang
  - test
categories:
  - golang
published: false
---

# Golang Test

Go에서는 **go test**라는 내장 테스트 도구를 제공한다. 이 도구로 Go 코드의 단위 테스트, 벤치마크, 예제 등을 쉽게 작성하고 실행할 수 있다.  
그 외에도 여러 테스트 프레임워크가 존재하며, mock을 위한 라이브러리도 많이 존재한다. 이번 포스팅에서는 Go에서의 테스트를 크게 훑어보고, 사용법과 장단점을 비교해보려고 한다.

## Go test

Go에서 제공하는 테스트는 단순하게 작성이 가능하다. 다음의 규칙만 지킨다면, 바로 정의 후 사용할 수 있다.

- `_test.go`로 끝나는 파일로 작성
- `Test`로 시작하는 함수로 정의
- `Benchmark`로 시작하는 함수로 성능 벤치마크 작성

### 사용법

위의 규칙에 맞게 작성하였다면, 명령어만 사용한다면 바로 테스트를 실행하고 확인해볼 수 있다.

```shell
$ go test
```

`go test`는 현재 디렉토리에 있는 모든 테스트를 실행하는 명령으로 바로 결과를 받아 볼 수 있다. 이 명령어에 옵션으로 여러가지 기능들을 추가할 수 있다.

```shell
$ go test -bench .
$ go test -cover
$ go test -run TestFunctionName
```

위에서부터 벤치마크 기능, 테스트 커버리지 확인, 특정 테스트를 실행하는 옵션이다. 특정 테스트의 경우 정규 표현식을 사용해서 원하는 테스트만 실행할 수도 있다.  

### 특징

- 간결하고 일관된 문법
- 테스트 자동 검출
- 테이블 주도 테스트 지원
- 내장 벤치마크 도구
- 테스트 커버리지 지원
- 표준 라이브러리 일부

따라오는 단점으로는 다음과 같다.

- 고급 테스트 기능 부족
  - mock 객체 생성, 테스트 스위트 관리 기능 부재
- 병렬 테스트 제어
  - 기본으로 병렬 실행이지만, 세밀하게 제어 시에 복잡도 높음
- 테스트 리포트 포맷
  - 리포트 서드파티와 통합을 위해서 작업이 필요
- 외부 의존성 관리

Goland와 VScode와 같은 IDE에서 확장 기능을 설치하면 원하는 Test 코드들을 작성하도록 템플릿을 제공하거나 테스트를 실행할 수 있다.